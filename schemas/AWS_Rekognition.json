{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AWS Rekognition",
  "description": "Sends data to AWS Rekognition",
  "x-n8n-node-type": "awsRekognition",
  "x-n8n-version": 1,
  "x-n8n-group": [
    "output"
  ],
  "type": "object",
  "properties": {
    "authentication": {
      "x-title": "Authentication",
      "default": "iam",
      "type": "string",
      "enum": [
        "iam",
        "assumeRole"
      ],
      "x-enumNames": [
        "AWS (IAM)",
        "AWS (Assume Role)"
      ]
    },
    "resource": {
      "x-title": "Resource",
      "default": "image",
      "type": "string",
      "enum": [
        "image"
      ],
      "x-enumNames": [
        "Image"
      ]
    },
    "operation": {
      "x-title": "Operation",
      "default": "analyze",
      "type": "string",
      "enum": [
        "analyze"
      ],
      "x-enumNames": [
        "Analyze"
      ]
    },
    "type": {
      "x-title": "Type",
      "default": "detectFaces",
      "x-displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ]
        }
      },
      "type": "string",
      "enum": [
        "detectFaces",
        "detectLabels",
        "detectModerationLabels",
        "detectText",
        "recognizeCelebrity"
      ],
      "x-enumNames": [
        "Detect Faces",
        "Detect Labels",
        "Detect Moderation Labels",
        "Detect Text",
        "Recognize Celebrity"
      ]
    },
    "binaryData": {
      "x-title": "Binary File",
      "description": "Whether the image to analyze should be taken from binary field",
      "default": false,
      "x-displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ]
        }
      },
      "x-required": true,
      "type": "boolean"
    },
    "binaryPropertyName": {
      "x-title": "Input Binary Field",
      "default": "data",
      "x-displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ],
          "binaryData": [
            true
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "bucket": {
      "x-title": "Bucket",
      "description": "Name of the S3 bucket",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ],
          "binaryData": [
            false
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "name": {
      "x-title": "Name",
      "description": "S3 object key name",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ],
          "binaryData": [
            false
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "additionalFields": {
      "x-title": "Additional Fields",
      "default": {},
      "x-displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ]
        }
      },
      "type": "object",
      "properties": {
        "regionsOfInterestUi": {
          "x-title": "Regions of Interest",
          "default": {},
          "x-displayOptions": {
            "show": {
              "/type": [
                "detectText"
              ]
            }
          },
          "type": "object",
          "properties": {
            "regionsOfInterestValues": {
              "x-title": "Region of Interest",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "height": {
                    "x-title": "Height",
                    "description": "Height of the bounding box as a ratio of the overall image height",
                    "default": 0,
                    "type": "number"
                  },
                  "left": {
                    "x-title": "Left",
                    "description": "Left coordinate of the bounding box as a ratio of overall image width",
                    "default": 0,
                    "type": "number"
                  },
                  "top": {
                    "x-title": "Top",
                    "description": "Top coordinate of the bounding box as a ratio of overall image height",
                    "default": 0,
                    "type": "number"
                  },
                  "Width": {
                    "x-title": "Width",
                    "description": "Width of the bounding box as a ratio of the overall image width",
                    "default": 0,
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "version": {
          "x-title": "Version",
          "description": "If the bucket is versioning enabled, you can specify the object version",
          "default": "",
          "x-displayOptions": {
            "show": {
              "/binaryData": [
                false
              ]
            }
          },
          "type": "string"
        },
        "wordFilterUi": {
          "x-title": "Word Filter",
          "default": {},
          "x-displayOptions": {
            "show": {
              "/type": [
                "detectText"
              ]
            }
          },
          "type": "object",
          "properties": {
            "MinBoundingBoxHeight": {
              "x-title": "Min Bounding Box Height",
              "description": "Sets the minimum height of the word bounding box. Words with bounding box heights lesser than this value will be excluded from the result. Value is relative to the video frame height.",
              "default": 0,
              "type": "number"
            },
            "MinBoundingBoxWidth": {
              "x-title": "Min Bounding Box Width",
              "description": "Sets the minimum width of the word bounding box. Words with bounding boxes widths lesser than this value will be excluded from the result. Value is relative to the video frame width.",
              "default": 0,
              "type": "number"
            },
            "MinConfidence": {
              "x-title": "Min Confidence",
              "description": "Sets the confidence of word detection. Words with detection confidence below this will be excluded from the result. Values should be between 50 and 100 as Text in Video will not return any result below 50.",
              "default": 0,
              "type": "number"
            }
          }
        },
        "maxLabels": {
          "x-title": "Max Labels",
          "description": "Maximum number of labels you want the service to return in the response. The service returns the specified number of highest confidence labels.",
          "default": 0,
          "x-displayOptions": {
            "show": {
              "/type": [
                "detectModerationLabels",
                "detectLabels"
              ]
            }
          },
          "type": "number",
          "minimum": 0
        },
        "minConfidence": {
          "x-title": "Min Confidence",
          "description": "Specifies the minimum confidence level for the labels to return. Amazon Rekognition doesn't return any labels with a confidence level lower than this specified value.",
          "default": 0,
          "x-displayOptions": {
            "show": {
              "/type": [
                "detectModerationLabels",
                "detectLabels"
              ]
            }
          },
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "attributes": {
          "x-title": "Attributes",
          "description": "An array of facial attributes you want to be returned",
          "default": [],
          "x-displayOptions": {
            "show": {
              "/type": [
                "detectFaces"
              ]
            }
          },
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "all",
              "default"
            ]
          },
          "x-enumNames": [
            "All",
            "Default"
          ]
        }
      }
    }
  },
  "x-subtitle": "={{$parameter[\"operation\"] + \": \" + $parameter[\"resource\"]}}",
  "x-icon": "file:rekognition.svg",
  "x-inputs": [
    "main"
  ],
  "x-outputs": [
    "main"
  ],
  "x-credentials": [
    {
      "name": "aws",
      "required": true,
      "displayOptions": {
        "show": {
          "authentication": [
            "iam"
          ]
        }
      }
    },
    {
      "name": "awsAssumeRole",
      "required": true,
      "displayOptions": {
        "show": {
          "authentication": [
            "assumeRole"
          ]
        }
      }
    }
  ]
}
