{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Gmail",
  "description": "Consume the Gmail API",
  "x-n8n-node-type": "gmail",
  "x-n8n-version": 1,
  "x-n8n-group": [
    "transform"
  ],
  "type": "object",
  "properties": {
    "authentication": {
      "x-title": "Authentication",
      "default": "oAuth2",
      "type": "string",
      "enum": [
        "oAuth2",
        "serviceAccount"
      ],
      "x-enumNames": [
        "OAuth2 (recommended)",
        "Service Account"
      ]
    },
    "resource": {
      "x-title": "Resource",
      "default": "draft",
      "type": "string",
      "enum": [
        "draft",
        "label",
        "message",
        "messageLabel"
      ],
      "x-enumNames": [
        "Draft",
        "Label",
        "Message",
        "Message Label"
      ]
    },
    "operation": {
      "x-title": "Operation",
      "default": "add",
      "x-displayOptions": {
        "show": {
          "resource": [
            "messageLabel"
          ]
        }
      },
      "type": "string",
      "enum": [
        "add",
        "remove"
      ],
      "x-enumNames": [
        "Add",
        "Remove"
      ]
    },
    "messageId": {
      "x-title": "Message ID",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "messageLabel"
          ],
          "operation": [
            "add",
            "remove"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "subject": {
      "x-title": "Subject",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "message"
          ],
          "operation": [
            "reply",
            "send"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "includeHtml": {
      "x-title": "HTML",
      "description": "Whether the message should also be included as HTML",
      "default": false,
      "x-displayOptions": {
        "show": {
          "resource": [
            "message"
          ],
          "operation": [
            "send",
            "reply"
          ]
        }
      },
      "type": "boolean"
    },
    "htmlMessage": {
      "x-title": "HTML Message",
      "description": "The HTML message body",
      "default": "",
      "x-displayOptions": {
        "show": {
          "includeHtml": [
            true
          ],
          "resource": [
            "message"
          ],
          "operation": [
            "reply",
            "send"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "message": {
      "x-title": "Message",
      "description": "Plain text message body",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "message"
          ],
          "operation": [
            "reply",
            "send"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "additionalFields": {
      "x-title": "Additional Fields",
      "default": {},
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "message"
          ]
        }
      },
      "type": "object",
      "properties": {
        "dataPropertyAttachmentsPrefixName": {
          "x-title": "Attachment Prefix",
          "description": "Prefix for name of the binary property to which to write the attachment. An index starting with 0 will be added. So if name is \"attachment_\" the first attachment is saved to \"attachment_0\".",
          "default": "attachment_",
          "x-displayOptions": {
            "hide": {
              "format": [
                "full",
                "ids",
                "metadata",
                "minimal",
                "raw"
              ]
            }
          },
          "type": "string"
        },
        "format": {
          "x-title": "Format",
          "description": "The format to return the message in",
          "default": "resolved",
          "type": "string",
          "enum": [
            "full",
            "ids",
            "metadata",
            "minimal",
            "raw",
            "resolved"
          ],
          "x-enumNames": [
            "Full",
            "IDs",
            "Metadata",
            "Minimal",
            "RAW",
            "Resolved"
          ],
          "x-enumDescriptions": [
            "Returns the full email message data with body content parsed in the payload field",
            "Returns only the IDs of the emails",
            "Returns only email message ID, labels, and email headers",
            "Returns only email message ID and labels; does not return the email headers, body, or payload",
            "Returns the full email message data with body content in the raw field as a base64url encoded string; the payload field is not used",
            "Returns the full email with all data resolved and attachments saved as binary data"
          ]
        },
        "includeSpamTrash": {
          "x-title": "Include Spam and Trash",
          "description": "Whether to include messages from SPAM and TRASH in the results",
          "default": false,
          "type": "boolean"
        },
        "labelIds": {
          "x-title": "Label Names or IDs",
          "description": "Only return messages with labels that match all of the specified label IDs. Choose from the list, or specify IDs using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": [],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "q": {
          "x-title": "Query",
          "description": "Only return messages matching the specified query. Supports the same query format as the Gmail search box. For example, \"from:someuser@example.com rfc822msgid:&lt;somemsgid@example.com&gt; is:unread\". Parameter cannot be used when accessing the api using the gmail.metadata scope.",
          "default": "",
          "type": "string"
        }
      }
    },
    "returnAll": {
      "x-title": "Return All",
      "description": "Whether to return all results or only up to a given limit",
      "default": false,
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "message"
          ]
        }
      },
      "type": "boolean"
    },
    "limit": {
      "x-title": "Limit",
      "description": "Max number of results to return",
      "default": 10,
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "message"
          ],
          "returnAll": [
            false
          ]
        }
      },
      "type": "number",
      "minimum": 1,
      "maximum": 500
    },
    "name": {
      "x-title": "Name",
      "description": "Label Name",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "label"
          ],
          "operation": [
            "create"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "labelId": {
      "x-title": "Label ID",
      "description": "The ID of the label",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "label"
          ],
          "operation": [
            "get",
            "delete"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "labelListVisibility": {
      "x-title": "Label List Visibility",
      "description": "The visibility of the label in the label list in the Gmail web interface",
      "default": "labelShow",
      "x-displayOptions": {
        "show": {
          "resource": [
            "label"
          ],
          "operation": [
            "create"
          ]
        }
      },
      "x-required": true,
      "type": "string",
      "enum": [
        "labelHide",
        "labelShow",
        "labelShowIfUnread"
      ],
      "x-enumNames": [
        "Hide",
        "Show",
        "Show If Unread"
      ]
    },
    "messageListVisibility": {
      "x-title": "Message List Visibility",
      "description": "The visibility of messages with this label in the message list in the Gmail web interface",
      "default": "show",
      "x-displayOptions": {
        "show": {
          "resource": [
            "label"
          ],
          "operation": [
            "create"
          ]
        }
      },
      "x-required": true,
      "type": "string",
      "enum": [
        "hide",
        "show"
      ],
      "x-enumNames": [
        "Hide",
        "Show"
      ]
    },
    "threadId": {
      "x-title": "Thread ID",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "message"
          ],
          "operation": [
            "reply"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "toList": {
      "x-title": "To Email",
      "description": "The email addresses of the recipients",
      "default": [],
      "x-displayOptions": {
        "show": {
          "resource": [
            "message"
          ],
          "operation": [
            "reply",
            "send"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "labelIds": {
      "x-title": "Label Names or IDs",
      "description": "The ID of the label. Choose from the list, or specify IDs using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
      "default": [],
      "x-displayOptions": {
        "show": {
          "resource": [
            "messageLabel"
          ],
          "operation": [
            "add",
            "remove"
          ]
        }
      },
      "x-required": true,
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  },
  "x-subtitle": "={{$parameter[\"operation\"] + \": \" + $parameter[\"resource\"]}}",
  "x-icon": "file:gmail.svg",
  "x-inputs": [
    "main"
  ],
  "x-outputs": [
    "main"
  ],
  "x-credentials": [
    {
      "name": "googleApi",
      "required": true,
      "displayOptions": {
        "show": {
          "authentication": [
            "serviceAccount"
          ]
        }
      }
    },
    {
      "name": "gmailOAuth2",
      "required": true,
      "displayOptions": {
        "show": {
          "authentication": [
            "oAuth2"
          ]
        }
      }
    }
  ]
}
