{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Pipedrive",
  "description": "Create and edit data in Pipedrive",
  "x-n8n-node-type": "pipedrive",
  "x-n8n-version": 1,
  "x-n8n-group": [
    "transform"
  ],
  "type": "object",
  "properties": {
    "authentication": {
      "x-title": "Authentication",
      "default": "apiToken",
      "type": "string",
      "enum": [
        "apiToken",
        "oAuth2"
      ],
      "x-enumNames": [
        "API Token",
        "OAuth2"
      ]
    },
    "resource": {
      "x-title": "Resource",
      "default": "deal",
      "type": "string",
      "enum": [
        "activity",
        "deal",
        "dealActivity",
        "dealProduct",
        "file",
        "lead",
        "note",
        "organization",
        "person",
        "product"
      ],
      "x-enumNames": [
        "Activity",
        "Deal",
        "Deal Activity",
        "Deal Product",
        "File",
        "Lead",
        "Note",
        "Organization",
        "Person",
        "Product"
      ]
    },
    "operation": {
      "x-title": "Operation",
      "default": "getAll",
      "x-displayOptions": {
        "show": {
          "resource": [
            "product"
          ]
        }
      },
      "type": "string",
      "enum": [
        "getAll"
      ],
      "x-enumNames": [
        "Get Many"
      ],
      "x-enumDescriptions": [
        "Get data of many products"
      ]
    },
    "subject": {
      "x-title": "Subject",
      "description": "The subject of the activity to create",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "activity"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "done": {
      "x-title": "Done",
      "description": "Whether the activity is done or not",
      "default": "0",
      "x-displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "activity"
          ]
        }
      },
      "type": "string",
      "enum": [
        "0",
        "1"
      ],
      "x-enumNames": [
        "Not Done",
        "Done"
      ]
    },
    "type": {
      "x-title": "Type",
      "description": "Type of the activity like \"call\", \"meeting\", etc",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "activity"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "additionalFields": {
      "x-title": "Additional Fields",
      "default": {},
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "activity"
          ]
        }
      },
      "type": "object",
      "properties": {
        "done": {
          "x-title": "Done",
          "description": "Whether the Activity is done or not. 0 = Not done, 1 = Done. If omitted returns both Done and Not done activities.",
          "default": false,
          "type": "boolean"
        },
        "end_date": {
          "x-title": "End Date",
          "description": "Use the Activity due date where you wish to stop fetching Activities from. Insert due date in YYYY-MM-DD format.",
          "default": "",
          "type": "string",
          "format": "date-time"
        },
        "filterId": {
          "x-title": "Predefined Filter Name or ID",
          "description": "The ID of the Filter to use (will narrow down results if used together with user_id parameter). Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        },
        "start_date": {
          "x-title": "Star Date",
          "description": "Use the Activity due date where you wish to begin fetching Activities from. Insert due date in YYYY-MM-DD format.",
          "default": "",
          "type": "string",
          "format": "date-time"
        },
        "type": {
          "x-title": "Type Names or IDs",
          "description": "Type of the Activity. Choose from the list, or specify IDs using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": [],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "user_id": {
          "x-title": "User Name or ID",
          "description": "The ID of the User whose Activities will be fetched. If omitted, the User associated with the API token will be used. If 0, Activities for all company Users will be fetched based on the permission sets. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        }
      }
    },
    "activityId": {
      "x-title": "Activity ID",
      "description": "ID of the activity to update",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "operation": [
            "update"
          ],
          "resource": [
            "activity"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "updateFields": {
      "x-title": "Update Fields",
      "description": "The fields to update",
      "default": {},
      "x-displayOptions": {
        "show": {
          "operation": [
            "update"
          ],
          "resource": [
            "person"
          ]
        }
      },
      "type": "object",
      "properties": {
        "customProperties": {
          "x-title": "Custom Properties",
          "description": "Adds a custom property to set also values which have not been predefined",
          "default": {},
          "type": "object",
          "properties": {
            "property": {
              "x-title": "Property",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "x-title": "Property Name or ID",
                    "description": "Name of the custom field to set. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
                    "default": "",
                    "type": "string"
                  },
                  "value": {
                    "x-title": "Property Value",
                    "description": "Value of the property to set",
                    "default": "",
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "email": {
          "x-title": "Email",
          "description": "Email of the person",
          "default": "",
          "type": "string"
        },
        "label": {
          "x-title": "Label Name or ID",
          "description": "Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>",
          "default": "",
          "type": "string"
        },
        "marketing_status": {
          "x-title": "Marketing Status",
          "description": "Please be aware that it is only allowed once to change the marketing status from an old status to a new one",
          "default": "subscribed",
          "type": "string",
          "enum": [
            "no_consent",
            "unsubscribed",
            "subscribed",
            "archived"
          ],
          "x-enumNames": [
            "No Consent",
            "Unsubscribed",
            "Subscribed",
            "Archived"
          ]
        },
        "name": {
          "x-title": "Name",
          "description": "The name of the person",
          "default": "",
          "type": "string"
        },
        "org_id": {
          "x-title": "Organization Name or ID",
          "description": "ID of the organization this deal will be associated with. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        },
        "phone": {
          "x-title": "Phone",
          "description": "Phone number of the person",
          "default": "",
          "type": "string"
        },
        "owner_id": {
          "x-title": "User Name or ID",
          "description": "ID of the User this person will be associated with. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        },
        "visible_to": {
          "x-title": "Visible To",
          "description": "Visibility of the deal. If omitted, visibility will be set to the default visibility setting of this item type for the authorized user.",
          "default": "3",
          "type": "string",
          "enum": [
            "1",
            "3"
          ],
          "x-enumNames": [
            "Owner & Followers (Private)",
            "Entire Company (Shared)"
          ]
        }
      }
    },
    "title": {
      "x-title": "Title",
      "description": "Name of the lead to create",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "lead"
          ],
          "operation": [
            "create"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "associateWith": {
      "x-title": "Associate With",
      "description": "Type of entity to link to this lead",
      "default": "organization",
      "x-displayOptions": {
        "show": {
          "resource": [
            "lead"
          ],
          "operation": [
            "create"
          ]
        }
      },
      "x-required": true,
      "type": "string",
      "enum": [
        "organization",
        "person"
      ],
      "x-enumNames": [
        "Organization",
        "Person"
      ]
    },
    "org_id": {
      "x-title": "Organization ID",
      "description": "ID of the organization this deal will be associated with",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "deal"
          ],
          "associateWith": [
            "organization"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "person_id": {
      "x-title": "Person ID",
      "description": "ID of the person to link to this lead",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "resource": [
            "lead"
          ],
          "operation": [
            "create"
          ],
          "associateWith": [
            "person"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "dealId": {
      "x-title": "Deal Name or ID",
      "description": "The ID of the deal whose activity to retrieve. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "dealActivity"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "productId": {
      "x-title": "Product Name or ID",
      "description": "The ID of the product to add to a deal. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "add"
          ],
          "resource": [
            "dealProduct"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "item_price": {
      "x-title": "Item Price",
      "description": "Price at which to add or update this product in a deal",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "operation": [
            "add"
          ],
          "resource": [
            "dealProduct"
          ]
        }
      },
      "x-required": true,
      "type": "number",
      "x-precision": 2
    },
    "quantity": {
      "x-title": "Quantity",
      "description": "How many items of this product to add/update in a deal",
      "default": 1,
      "x-displayOptions": {
        "show": {
          "operation": [
            "add"
          ],
          "resource": [
            "dealProduct"
          ]
        }
      },
      "x-required": true,
      "type": "number",
      "minimum": 1
    },
    "productAttachmentId": {
      "x-title": "Product Attachment Name or ID",
      "description": "ID of the deal-product (the ID of the product attached to the deal). Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "remove"
          ],
          "resource": [
            "dealProduct"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "term": {
      "x-title": "Term",
      "description": "The search term to look for. Minimum 2 characters (or 1 if using exact_match).",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "search"
          ],
          "resource": [
            "person"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "exactMatch": {
      "x-title": "Exact Match",
      "description": "Whether only full exact matches against the given term are returned. It is not case sensitive.",
      "default": false,
      "x-displayOptions": {
        "show": {
          "operation": [
            "search"
          ],
          "resource": [
            "deal"
          ]
        }
      },
      "type": "boolean"
    },
    "returnAll": {
      "x-title": "Return All",
      "description": "Whether to return all results or only up to a given limit",
      "default": false,
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ]
        }
      },
      "type": "boolean"
    },
    "limit": {
      "x-title": "Limit",
      "description": "Max number of results to return",
      "default": 100,
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "returnAll": [
            false
          ]
        }
      },
      "type": "number",
      "minimum": 1,
      "maximum": 500
    },
    "binaryPropertyName": {
      "x-title": "Put Output File in Field",
      "default": "data",
      "x-displayOptions": {
        "show": {
          "operation": [
            "download"
          ],
          "resource": [
            "file"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "fileId": {
      "x-title": "File ID",
      "description": "ID of the file to update",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "operation": [
            "update"
          ],
          "resource": [
            "file"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "organization_id": {
      "x-title": "Organization ID",
      "description": "ID of the organization to link to this lead",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "resource": [
            "lead"
          ],
          "operation": [
            "create"
          ],
          "associateWith": [
            "organization"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "leadId": {
      "x-title": "Lead ID",
      "description": "ID of the lead to update",
      "default": "",
      "x-displayOptions": {
        "show": {
          "resource": [
            "lead"
          ],
          "operation": [
            "update"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "content": {
      "x-title": "Content",
      "description": "The content of the note to create",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "note"
          ]
        }
      },
      "x-required": true,
      "type": "string",
      "x-rows": 5
    },
    "noteId": {
      "x-title": "Note ID",
      "description": "ID of the note to update",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "operation": [
            "update"
          ],
          "resource": [
            "note"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "name": {
      "x-title": "Name",
      "description": "The name of the person to create",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "person"
          ]
        }
      },
      "x-required": true,
      "type": "string"
    },
    "organizationId": {
      "x-title": "Organization ID",
      "description": "The ID of the organization to create",
      "default": "",
      "x-displayOptions": {
        "show": {
          "operation": [
            "update"
          ],
          "resource": [
            "organization"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "personId": {
      "x-title": "Person ID",
      "description": "ID of the person to update",
      "default": 0,
      "x-displayOptions": {
        "show": {
          "operation": [
            "update"
          ],
          "resource": [
            "person"
          ]
        }
      },
      "x-required": true,
      "type": "number"
    },
    "resolveProperties": {
      "x-title": "Resolve Properties",
      "description": "By default do custom properties get returned only as ID instead of their actual name. Also option fields contain only the ID instead of their actual value. If this option gets set they get automatically resolved.",
      "default": false,
      "x-displayOptions": {
        "show": {
          "resource": [
            "activity",
            "deal",
            "organization",
            "person",
            "product"
          ],
          "operation": [
            "get",
            "getAll"
          ]
        }
      },
      "type": "boolean"
    },
    "encodeProperties": {
      "x-title": "Encode Properties",
      "description": "By default do custom properties have to be set as ID instead of their actual name. Also option fields have to be set as ID instead of their actual value. If this option gets set they get automatically encoded.",
      "default": false,
      "x-displayOptions": {
        "show": {
          "resource": [
            "activity",
            "deal",
            "organization",
            "person",
            "product"
          ],
          "operation": [
            "update"
          ]
        }
      },
      "type": "boolean"
    },
    "filters": {
      "x-title": "Filters",
      "default": {},
      "x-displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "deal"
          ]
        }
      },
      "type": "object",
      "properties": {
        "filter_id": {
          "x-title": "Predefined Filter Name or ID",
          "description": "Predefined filter to apply to the deals to retrieve. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        },
        "stage_id": {
          "x-title": "Stage Name or ID",
          "description": "ID of the stage to filter deals by. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        },
        "status": {
          "x-title": "Status",
          "description": "Status to filter deals by. Defaults to <code>all_not_deleted</code>",
          "default": "all_not_deleted",
          "type": "string",
          "enum": [
            "all_not_deleted",
            "deleted",
            "lost",
            "open",
            "won"
          ],
          "x-enumNames": [
            "All Not Deleted",
            "Deleted",
            "Lost",
            "Open",
            "Won"
          ]
        },
        "user_id": {
          "x-title": "User Name or ID",
          "description": "ID of the user to filter deals by. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
          "default": "",
          "type": "string"
        }
      }
    }
  },
  "x-subtitle": "={{$parameter[\"operation\"] + \": \" + $parameter[\"resource\"]}}",
  "x-icon": "file:pipedrive.svg",
  "x-inputs": [
    "main"
  ],
  "x-outputs": [
    "main"
  ],
  "x-credentials": [
    {
      "name": "pipedriveApi",
      "required": true,
      "displayOptions": {
        "show": {
          "authentication": [
            "apiToken"
          ]
        }
      },
      "testedBy": {
        "request": {
          "method": "GET",
          "url": "/users/me"
        }
      }
    },
    {
      "name": "pipedriveOAuth2Api",
      "required": true,
      "displayOptions": {
        "show": {
          "authentication": [
            "oAuth2"
          ]
        }
      }
    }
  ]
}
